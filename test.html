<!DOCTYPE html>
<html>
<head>
  <title>주관식 문답 페이지</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
  <h1>주관식 문답 페이지</h1>
  <form id="answer-form">
    <h3 id="question"></h3>
    <label for="answer">질문에 대한 답변:</label>
    <textarea id="answer" rows="5"></textarea>
    <button type="submit">다음</button>
  </form>

  <script>
    $(document).ready(function() {
      var questionIndex = 0; // 질문 인덱스

      // 초기 질문 표시
      fetchQuestion();

      // 폼 제출 이벤트 처리
      $('#answer-form').on('submit', function(e) {
        e.preventDefault(); // 폼 제출 방지

        var answer = $('#answer').val(); // 답변 내용 가져오기
        saveAnswer(answer); // 답변 저장

        // 다음 질문 표시
        questionIndex++;
        fetchQuestion();
      });

      // 질문 가져오기 함수 (AJAX 예시)
      function fetchQuestion() {
        $.ajax({
          url: '/get-question', // 실제 서버 엔드포인트로 변경
          method: 'GET',
          success: function(response) {
            console.log('질문 가져오기 성공:', response);
            displayQuestion(response.question);
          },
          error: function(error) {
            console.log('질문 가져오기 실패:', error);
          }
        });
      }

      // 질문 표시 함수
      function displayQuestion(question) {
        $('#answer').val(''); // 이전 답변 초기화
        $('#question').text('Q. ' + question);
      }

      // 답변 저장 함수 (AJAX 예시)
      function saveAnswer(answer) {
        // 실제 서버와 통신하여 답변 저장
        $.ajax({
          url: '/save-answer', // 실제 서버 엔드포인트로 변경
          method: 'POST',
          data: { answer: answer },
          success: function(response) {
            console.log('답변 저장 성공:', response);
          },
          error: function(error) {
            console.log('답변 저장 실패:', error);
          }
        });
      }
    });
  </script>
</body>
</html>
